<%- include('../../partials/header') %>

<div class="admin-layout">
  <%- include('../../partials/admin-sidebar') %>

  <div class="admin-content">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <h1>Manage Topics</h1>
      <a href="/admin/topics/create" class="btn btn-primary">Create New Topic</a>
    </div>

    <% if (topics.length > 0) { %>
      <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Subject</th>
            <th>Order</th>
            <th>Published</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% topics.forEach(topic => { %>
            <tr>
              <td><%= topic.title %></td>
              <td><%= topic.subject.title %></td>
              <td><%= topic.displayOrder %></td>
              <td><%= topic.isPublished ? 'Yes' : 'No' %></td>
              <td>
                <a href="/admin/topics/edit/<%= topic.id %>" class="btn btn-secondary">Edit</a>
                <a href="/admin/concepts/create?topicId=<%= topic.id %>" class="btn btn-primary">Add Concept</a>
                <form action="/admin/topics/delete/<%= topic.id %>" method="POST" style="display: inline;" onsubmit="return confirmDelete();">
                  <button type="submit" class="btn btn-danger">Delete</button>
                </form>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    <% } else { %>
      <p>No topics found. <a href="/admin/topics/create">Create one now</a></p>
    <% } %>
  </div>
</div>

<%- include('../../partials/footer') %>
