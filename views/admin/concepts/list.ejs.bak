<%- include('../../partials/header') %>

<div class="container">
  <div class="content">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <h1>Manage Concepts</h1>
      <a href="/admin/concepts/create" class="btn btn-primary">Create New Concept</a>
    </div>

    <% if (concepts.length > 0) { %>
      <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Topic</th>
            <th>Subject</th>
            <th>Order</th>
            <th>Published</th>
            <th>Last Revised</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% concepts.forEach(concept => { %>
            <tr>
              <td><%= concept.title %></td>
              <td><%= concept.topic.title %></td>
              <td><%= concept.topic.subject.title %></td>
              <td><%= concept.displayOrder %></td>
              <td><%= concept.isPublished ? 'Yes' : 'No' %></td>
              <td><%= concept.lastRevisedOn ? new Date(concept.lastRevisedOn).toLocaleDateString() : 'Never' %></td>
              <td>
                <a href="/admin/concepts/edit/<%= concept.id %>" class="btn btn-secondary">Edit</a>
                <form action="/admin/concepts/delete/<%= concept.id %>" method="POST" style="display: inline;" onsubmit="return confirmDelete();">
                  <button type="submit" class="btn btn-danger">Delete</button>
                </form>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    <% } else { %>
      <p>No concepts found. <a href="/admin/concepts/create">Create one now</a></p>
    <% } %>
  </div>
</div>

<%- include('../../partials/footer') %>
